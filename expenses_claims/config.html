{{#restrict block=true section="config" level="admin"}}{{/restrict}}
{{:include file="./_config_default.tpl" keep="module.config,vehicles"}}

{{#form on="save"}}
	{{:save key="config"
		notify_users=$_POST.notify_users|arrayval
		extra_user_fields=$_POST.extra_user_fields|arrayval
	}}
	{{:redirect to="./config.html?msg=ok"}}
{{/form}}

{{:admin_header title="Catégories des notes de frais"}}

<nav class="tabs">
	<aside>
		{{:linkbutton shape="left" href="./" label="Liste des notes de frais"}}
		{{:linkbutton shape="plus" href="./cat_edit.html?key=new" label="Ajouter une catégorie"}}
	</aside>

	<ul>
		<li class="current">{{:link href="config.html" label="Catégories"}}</li>
		<li>{{:link href="config_settings.html" label="Préférences"}}</li>
	</ul>
</nav>

{{if $_GET.msg === 'ok'}}
	<p class="confirm block">La configuration a été enregistrée.</p>
{{/if}}


{{#list type="category" schema="./category.schema.json" columns="label" order="label" disable_user_sort=true}}
	<tr>
		<th>{{$label}}</th>
		<td class="actions">
			{{:linkbutton shape="edit" href="./cat_edit.html?key=%s"|args:$key label="Modifier"}}
			{{:linkbutton shape="delete" href="./cat_delete.html?key=%s"|args:$key label="Supprimer" target="_dialog"}}
		</td>
	</tr>
{{/list}}

{{:admin_footer}}